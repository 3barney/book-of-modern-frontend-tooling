<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><title>Book of Modern frontend tooling</title><link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"><link rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap.min.css"><link rel="stylesheet" href="/book-of-modern-frontend-tooling/assets/css/style.css"><base href="/book-of-modern-frontend-tooling/"><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script></head><body><div id="container" class="container-fluid"><div class="row"><div id="sidebar" class="sidebar col-md-3"><div><div class="logo"><a href="https://github.com/tooling/book-of-modern-frontend-tooling">The Front-end Tooling Book</a></div><br><ul>
<li><p><a href="index.html">Introduction</a></p>
</li>
<li><p>Build Systems</p>
<ul>
<li>Modern tools vs shell scripts</li>
<li>Grunt<ul>
<li><a href="build-systems/grunt/getting-started.html">Getting started</a></li>
<li><a href="build-systems/grunt/linter.html">Linting code</a></li>
<li><a href="build-systems/grunt/sass.html">Integrating a CSS preprocessor</a></li>
</ul>
</li>
<li>Brunch<ul>
<li><a href="build-systems/brunch/introduction.html">Introduction</a></li>
<li><a href="build-systems/brunch/getting-started.html">Getting started</a></li>
<li><a href="build-systems/brunch/using-brunch.html">Using Brunch</a></li>
</ul>
</li>
<li>Gulp<ul>
<li><a href="build-systems/gulp/introduction.html">Introduction</a></li>
<li><a href="build-systems/gulp/getting-started.html">Getting started</a></li>
<li><a href="build-systems/gulp/writing-tasks.html">Writing tasks</a></li>
<li><a href="build-systems/gulp/references.html">References</a></li>
</ul>
</li>
</ul>
</li>
<li><p>Dependency management</p>
<ul>
<li>Bower<ul>
<li><a href="dependency-management/bower/introduction.html">Introduction</a></li>
</ul>
</li>
<li>WebPack<ul>
<li><a href="dependency-management/webpack/introduction.html">Introduction</a></li>
<li><a href="dependency-management/webpack/getting-started.html">Getting Started</a></li>
<li><a href="dependency-management/webpack/1-requiring-modules.html">Requiring Modules</a></li>
<li><a href="dependency-management/webpack/2-using-loaders.html">Using Loaders</a></li>
<li><a href="dependency-management/webpack/3-code-splitting.html">Code Splitting</a></li>
<li><a href="dependency-management/webpack/4-multi-entry-builds.html">Muli-entry Builds</a></li>
<li><a href="dependency-management/webpack/5-require-context.html">Require Context</a></li>
<li><a href="dependency-management/webpack/6-hot-module-replacement.html">Hot Module Replacement</a></li>
<li>Chunk Optimization</li>
<li><a href="dependency-management/webpack/8-writing-loaders-and-plugins.html">Writing Loaders And Plugins</a></li>
<li><a href="dependency-management/webpack/9-use-with-build-tools.html">Use With Build Tools</a></li>
<li><a href="dependency-management/webpack/references.html">References</a></li>
<li><a href="dependency-management/webpack/troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li>NPM browserify<ul>
<li><a href="dependency-management/npm-browserify/introduction.html">Introduction</a></li>
<li><a href="dependency-management/npm-browserify/getting-started.html">Getting started</a></li>
<li><a href="dependency-management/npm-browserify/writing-modules.html">Writing Modules</a></li>
<li><a href="dependency-management/npm-browserify/development-workflow.html">Development Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li>Scaffolding<ul>
<li>Yeoman</li>
<li>Brunch</li>
<li>Loom</li>
</ul>
</li>
</ul>
</div></div><div id="content" class="content col-md-9"><h1 id="using-brunch">Using Brunch</h1>
<h2 id="configuration">Configuration</h2>
<p>Brunch configuration is incredibly simple. Here&#39;s a sample <code>config.coffee</code> file for an AngularJS and CoffeeScript file.</p>
<pre><code><div class="highlight"><pre><span class="nx">conventions</span><span class="o">:</span>
  <span class="nx">assets</span><span class="o">:</span> <span class="sr">/^app\/assets\//</span>
<span class="nx">modules</span><span class="o">:</span>
  <span class="nx">definition</span><span class="o">:</span> <span class="kc">false</span>
  <span class="nx">wrapper</span><span class="o">:</span> <span class="kc">false</span>
<span class="nx">paths</span><span class="o">:</span>
  <span class="kr">public</span><span class="o">:</span> <span class="s1">&#39;_public&#39;</span>
<span class="nx">files</span><span class="o">:</span>
  <span class="nx">javascripts</span><span class="o">:</span>
    <span class="nx">joinTo</span><span class="o">:</span>
      <span class="s1">&#39;js/vendor.js&#39;</span><span class="o">:</span> <span class="sr">/^bower_components/</span>
      <span class="s1">&#39;js/app.js&#39;</span><span class="o">:</span> <span class="sr">/^app\/scripts/</span>
    <span class="nx">order</span><span class="o">:</span>
      <span class="nx">before</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;bower_components/lodash/lodash.js&#39;</span>
        <span class="s1">&#39;bower_components/jquery/jquery.js&#39;</span>
        <span class="s1">&#39;bower_components/angular/angular.js&#39;</span>
      <span class="p">]</span>
  <span class="nx">stylesheets</span><span class="o">:</span>
    <span class="nx">joinTo</span><span class="o">:</span>
      <span class="s1">&#39;css/app.css&#39;</span><span class="o">:</span> <span class="sr">/^app\/styles/</span>
</pre></div>

</code></pre><p>(N.B: We&#39;re using CoffeeScript here, but you can use raw JavaScript instead if you prefer - just name your file <code>config.js</code> instead)</p>
<p>The configuration file is simply specifying what folders Brunch should look for and what it should do with them. So, using regular expressions we tell Brunch that the <code>app/assets</code> folder should be copied directly into the output folder, which we name <code>_public</code> (see the <code>paths</code> property).</p>
<p>The rest of this is fairly self explanatory, although it&#39;s important to note that Brunch uses the new bower.json files to find packages located in <code>bower_components</code> - so only one of <code>jquery.js</code> and <code>jquery.min.js</code> will be included in <code>vendor.js</code>.</p>
<p>Finally, we&#39;re also telling Brunch to include certain scripts before others in the vendor.js file, mainly to make sure that <code>angular.js</code> uses jQuery rather than its jQLite implementation.</p>
<h2 id="plugins">Plugins</h2>
<p>Looking at the config file again, you&#39;ll notice there&#39;s no configuration or &#39;registering&#39; of plugins - although most plugins can be configured, the default behaviour usually works with no configuration.</p>
<p>Brunch plugins are just npm packages. Any Brunch plugin that&#39;s installed will automatically be used. Using <code>npm install --save-dev plugin-name</code> will install the package and update <code>package.json</code>.</p>
<p>Looking at the <code>package.json</code> file, we can see the plugins we&#39;ll be using in this project:</p>
<pre><code class="lang-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;project&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mongojs&quot;</span><span class="p">:</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mongoose&quot;</span><span class="p">:</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="nt">&quot;underscore&quot;</span><span class="p">:</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="nt">&quot;consolidate&quot;</span><span class="p">:</span> <span class="s2">&quot;~0.9.1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;~0.9.6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;webshot&quot;</span><span class="p">:</span> <span class="s2">&quot;~0.5.1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;gm&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.11.1&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;javascript-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;= 1.0 &lt; 1.8&quot;</span><span class="p">,</span>
    <span class="nt">&quot;coffee-script-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;= 1.0 &lt; 1.8&quot;</span><span class="p">,</span>
    <span class="nt">&quot;css-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;= 1.0 &lt; 1.8&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ngmin-uglify-js-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.7.2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;clean-css-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;= 1.0 &lt; 1.8&quot;</span><span class="p">,</span>
    <span class="nt">&quot;auto-reload-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.6.5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;less-brunch&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.5.2&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;engines&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;=0.8.0&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>Here we include the &#39;base&#39; plugins for JavaScript and CSS, the CoffeeScript and LESS compilation plugins, the CSS minification plugin <code>clean-css-brunch</code>, and the <code>ngmin-uglify-js-brunch</code> - a plugin that runs JavaScript code through <a href="https://github.com/btford/ngmin">ngmin</a>, the AngularJS &#39;pre-minifier&#39;, then uglifyjs to compress the code. We also use the auto reload plugin, which sets up a web socket server and refreshes the page whenever any files on disk are changed. </p>
<h2 id="-workflow-"><em>Workflow</em></h2>
<h2 id="-deployment-"><em>Deployment</em></h2>
</div></div><div id="footer" class="center">&copy; 2014 <a href="https://github.com/tooling/book-of-modern-frontend-tooling">The Front-end Tooling Book</a> Authors. Brought to you with love by the <a href='https://github.com/tooling/book-of-modern-frontend-tooling/graphs/contributors'>community</a>. Released under a CC-BY-SA-4.0 license.</div></div><!-- include ./includes/ga.jade--></body></html>